> [!IMPORTANT]
> [ê°•ì˜] íŠ¸ìœ„í„° í´ë¡ ì½”ë”©

# 20240920
### Outlet

- íŠ¹ì • ì»´í¬ë„ŒíŠ¸ë¼ë¦¬ ê³µí†µì ìœ¼ë¡œ ë³´ì—¬ì¤˜ì•¼í•˜ëŠ” ë ˆì´ì•„ì›ƒì´ ìˆì„ ë•Œ ìœ ìš©

ì•„ë˜ì™€ ê°™ì´ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— Layout elementë¥¼ ì„¤ì •í•˜ë©´ ì•„ë˜ì˜ Home, Profile ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ê³µí†µì ìœ¼ë¡œ ë³´ì—¬ì§€ë‚˜ Login ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë³´ì´ì§€ ì•ŠìŒ

```jsx
import { createBrowserRouter, RouterProvider } from "react-router-dom";
import Layout from "./components/layout";
import Home from "./routes/home";
import Profile from "./routes/profile";

const router = createBrowserRouter([
  {
    path: "/",
    element: <Layout />,
    children: [
      { path: "", element: <Home /> },
      { path: "profile", element: <Profile /> },
    ],
  },
  {
    path: "/login",
    children: [{ path: "", element: <Login /> }],
  },
]);

function App() {
  return (
    <>
      <RouterProvider router={router} />
    </>
  );
}

export default App;

```

`Outlet` íƒœê·¸ë¡œ ì¸í•˜ì—¬ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë³´ì—¬ì§€ê²Œ ë¨

```jsx
import { Outlet } from "react-router-dom";

export default function Layout() {
  return (
    <>
      <h2>layout</h2>
      <Outlet />
    </>
  );
}

```

### createGlobalStyle

- ê³µí†µì ì¸ ì†ì„±ì„ ì •ì˜

<aside>
ğŸ’¡

extension `vscode-styled-components` ì„ ì„¤ì¹˜í•´ì£¼ì!

</aside>

```jsx
const GlobalStyles = createGlobalStyle`
    ${reset};
    * {
        box-sizing: border-box;
    }
    body {
    background-color: black;
    color: white;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }`;

function App() {
  return (
    <>
      <GlobalStyles />
      <RouterProvider router={router} />
    </>
  );
}
```

### Firebase

- ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤
- ë°ì´í„° ë² ì´ìŠ¤, ì†Œì…œ ì„œë¹„ìŠ¤ ì—°ë™, íŒŒì¼ ì‹œìŠ¤í…œë“± API í˜•íƒœë¡œ ì œê³µ

```bash
npm install firebase
```

```jsx

import { initializeApp } from "firebase/app";

const firebaseConfig = {
  apiKey: "AIzaSyAqqkfK2ambsf8BybwNeefodM1E02vmEPQ",
  authDomain: "twitter-reloaded-6a53f.firebaseapp.com",
  projectId: "twitter-reloaded-6a53f",
  storageBucket: "twitter-reloaded-6a53f.appspot.com",
  messagingSenderId: "142837181205",
  appId: "1:142837181205:web:8e466d23ee46dc070b571c"
};

const app = initializeApp(firebaseConfig);
```

### Firebase - Auth

- firebaseì—ì„œ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ì„ í™œì„±í™” í•œ ë‹¤ìŒ ì•„ë˜ ì½”ë“œ ì¶”ê°€

```
import { getAuth } from "firebase/auth";

export const auth = getAuth(app);
```

- createUserWithEmailAndPassword

íšŒì› ìƒì„± ì‹œ authì™€ í•´ë‹¹ ì´ë©”ì¼ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë³´ë‚´ë©´ credentials ì— ê²°ê³¼ê°’ì´ ë“¤ì–´ê°. íšŒì› ì •ë³´ëŠ” `credentials.user` ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŒ

```jsx
const credentials = await createUserWithEmailAndPassword(
        auth,
        input.email,
        input.password
      );
```

- updateProfile

credentials ì—ì„œ íšŒì›ì •ë³´ì™€ ë¬´ì—‡ì„ ë°”ê¿€ê²ƒì¸ì§€ ì„¤ì •

```jsx
 await updateProfile(credentials.user, { displayName: input.name });
```

- currentUser

í˜„ì¬ ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ

```jsx
  const user = auth.currentUser;
```

- Protected Router

ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì•„ë‹ˆë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ì´ë™í•˜ë„ë¡

`currentUser` ëŠ” ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šìœ¼ë©´ null ì´ ë°˜í™˜ë¨

```jsx
/* eslint-disable react/prop-types */
import { Navigate } from "react-router-dom";
import { auth } from "../firebase";

export default function ProtectedRoute({ children }) {
  const user = auth.currentUser;

  if (user === null) {
    return <Navigate to="/login"></Navigate>;
  }

  return children;
}

```

Routerì—ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ì£¼ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ë„ Router ì¡°ê±´ì„ ê±¸ì¹˜ê²Œ ë¨

```jsx
{
    path: "/",
    element: (
      <ProtectedRoute>
        <Layout />
      </ProtectedRoute>
    ),
    children: [
      { path: "", element: <Home /> },
      { path: "profile", element: <Profile /> },
    ],
  }
```

- signOut

ë¡œê·¸ì•„ì›ƒ

```jsx
const logOut = () => {
    auth.signOut();
  };
```

- FirebaseError

ìœ ì € ìƒì„± ì‹œ ì˜¤ë¥˜ìºì¹˜ í•  ë•Œ

```jsx
try {
      setLoading(true);
      const credentials = await createUserWithEmailAndPassword(
        auth,
        input.email,
        input.password
      );

      await updateProfile(credentials.user, { displayName: input.name });
      navigate("/");
    } catch (error) {
      if (error instanceof FirebaseError) {
        setError(error.message);
      }
    } finally {
      setLoading(true);
    }
```

- signInWithEmailAndPassword

ë¡œê·¸ì¸ 

```jsx
 await signInWithEmailAndPassword(auth, input.email, input.password);
```
